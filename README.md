# μ‹μ¤ν… μ—°λ™ - CPP+PHP+DB
## π“Ά κ°μ”
 μ›Ή μ„λ²„λ“  κ²μ„ μ„λ²„λ“  κ°„μ— μ„λ²„μΈ΅ μ»΄ν“¨ν„°μ—μ„ μ§μ ‘ λ°μ΄ν„°λ¥Ό λ³΄κ΄€ν•λ” κ²½μ°λ” κ±°μ μ—†λ‹¤. λ³΄μ• μƒμ μ΄μ λ„ μμ§€λ§ κ²μ„ μ„λ²„μ κ²½μ°μ—λ” κ·Έ κ·λ¨κ°€ ν΄μλ΅ ν΄λΌμ΄μ–ΈνΈλ“¤λ΅λ¶€ν„° μ¤λ” κ°μΆ… μ”μ²­λ“¤μ„ μ²λ¦¬ν•κΈ°μ—λ„ λ¶€ν•κ°€ ν°λ° λ°μ΄ν„°λ² μ΄μ¤κΉμ§€ κ²Έν•λ©΄ μ„λΉ„μ¤κ°€ λ¶κ°€λ¥ν•  μ •λ„λ΅ λ¬΄κ±°μ›μ§„λ‹¤. λ‹¨, μ„λ²„λ¥Ό λ¶„μ‚°ν•λ©΄ λ„¤νΈμ›ν¬ ν†µμ‹ μ„ ν•΄μ•Όν•κΈ° λ•λ¬Έμ— λ„¤νΈμ›ν¬ μ§€μ—° μ‹κ°„μ΄ λ°μƒν•λ‹¤. λ”°λΌμ„ DBμ„λ²„μ™€ ν†µμ‹ ν•λ” μ„λ²„ κ°„μ λ¬Όλ¦¬μ μΈ κ±°λ¦¬κ°€ λ„λ¬΄ λ©€μ–΄μ„λ” μ•λλ‹¤.

 κ·λ¨κ°€ λ„λ¬΄ μ»¤μ§€λ©΄ DB μ‘μ—… μμ²΄κ°€ λλ ¤μ§ μ λ°–μ— μ—†κΈ° λ•λ¬Έμ— μ„λ²„λ¥Ό λ¶„μ‚°ν•΄λ„ κ°λ‹Ήμ΄ μ•λλ‹¤. μ΄λ° κ²½μ°μ—λ” μƒ¤λ”©(Sharding)μΌλ΅ μν‰ νν‹°μ…”λ‹(horizontal partitioning)μ„ ν•λ‹¤λκ°€, λ¦¬ν”λ¦¬μΌ€μ΄μ…(Replication; master-slave κµ¬μ΅°) κµ¬ν„ν•λ” μ λ°–μ— μ—†λ‹¤.  
 
## π’» μμ 
 C++(send/recv msg) β†” PHP(react msg, react db query) β†” DB(react query) example with autoset10(php7.1)


```cpp
    void main()
    {
      _wsetlocale(LC_ALL, L"");

      WSADATA wsa;
      if (WSAStartup(MAKEWORD(2, 2), &wsa) != 0)
      {
        wprintf(L"WSAStartup() Error : %d",  WSAGetLastError());
        return;
      }

      wchar outData[1024];

      //JSON μ–‘μ‹ μμ 
      //"{ \"id\":\"12d3\", \"pass\":\"1234\", \"nickname\":\"bsds\" }"

      err = CallHttp(L"127.0.0.1", L"http://127.0.0.1:80/login.php", POST, "{\"id\": \"gmf\",\"password\" : \"μ‚¬μ©ν¨μ¤μ›2dλ“\"}", outData, sizeof(outData));

      wprintf(L"%s\n", outData);

      WSACleanup();
    }
```


  ![capture](https://github.com/kbm0996/-SystemLink-CPPxPHPxDB/blob/master/jpg/figure.png)
  
  **figure 1. Run Result*


## π“ κµ¬μ΅°

μ‘ μ—… μ¤‘

  ![objectdiagram](https://github.com/kbm0996/SimpleShootingGame-OOP-/blob/master/1ObjectDiagram.jpg)
  
  **figure 2. Structure*
  
## π“‘ κµ¬μ„±

**π“‹ _CallHttp.h/cpp** : UTF8β†”UTF16 λ³€ν™ ν•¨μ, Domainβ†”IP λ³€ν™ ν•¨μ, Http GET/POST λ©”μ„Έμ§€ λ³΄λ‚΄κΈ° λ° λ°›κΈ° ν•¨μ

### π“‚ Home Directory

**π“‹ _Config_DB.php	** : μ΄ν• κ°μ²΄λ“¤μ λ¶€λ¨ ν΄λμ¤. μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” μμ κ°€μƒ ν•¨μλ“¤μ„ ν¬ν•¨ν•λ” μ¶”μƒ ν΄λμ¤

**π“‹ _Startup.php** : μ΄ν• κ°μ²΄λ“¤μ λ¶€λ¨ ν΄λμ¤. μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” μμ κ°€μƒ ν•¨μλ“¤μ„ ν¬ν•¨ν•λ” μ¶”μƒ ν΄λμ¤

**π“‹ Register.php** : μ΄ν• κ°μ²΄λ“¤μ λ¶€λ¨ ν΄λμ¤. μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” μμ κ°€μƒ ν•¨μλ“¤μ„ ν¬ν•¨ν•λ” μ¶”μƒ ν΄λμ¤

**π“‹ Login.php** : μ΄ν• κ°μ²΄λ“¤μ λ¶€λ¨ ν΄λμ¤. μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” μμ κ°€μƒ ν•¨μλ“¤μ„ ν¬ν•¨ν•λ” μ¶”μƒ ν΄λμ¤

**π“‹ Session.phpp** : μ΄ν• κ°μ²΄λ“¤μ λ¶€λ¨ ν΄λμ¤. μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” μμ κ°€μƒ ν•¨μλ“¤μ„ ν¬ν•¨ν•λ” μ¶”μƒ ν΄λμ¤

**π“‹ StageClear.php** : μ΄ν• κ°μ²΄λ“¤μ λ¶€λ¨ ν΄λμ¤. μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” μμ κ°€μƒ ν•¨μλ“¤μ„ ν¬ν•¨ν•λ” μ¶”μƒ ν΄λμ¤

**π“‹ UserInfo.php** : μ΄ν• κ°μ²΄λ“¤μ λ¶€λ¨ ν΄λμ¤. μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” μμ κ°€μƒ ν•¨μλ“¤μ„ ν¬ν•¨ν•λ” μ¶”μƒ ν΄λμ¤

**π“‹ _Cleanup.php** : μ΄ν• κ°μ²΄λ“¤μ λ¶€λ¨ ν΄λμ¤. μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” μμ κ°€μƒ ν•¨μλ“¤μ„ ν¬ν•¨ν•λ” μ¶”μƒ ν΄λμ¤


#### π“‚ _SQL : ν…μ΄λΈ” μµμ΄ μƒμ„±μ© sql

#### π“‚ _LIB : λΌμ΄λΈλ¬λ¦¬ ν΄λ”

**π“‹ _ResultCode.php**

**π“‹ lib_Call.php** : Curl κ΄€λ ¨ ν•¨μ

**π“‹ lib_DB.php** : μ‹¤μ§μ μΌλ΅ DBμ— Queryλ¥Ό λ‚ λ¦¬λ” ν•¨μ

**π“‹ lib_Key.php** : sha256 μΈμ½”λ”© ν•¨μ

π“‹ lib_ErrorHandler.php, π“‹ lib_Log.php, π“‹ lib_Profiling.php : λ””λ²„κΉ… κ΄€λ ¨ ν•¨μ

#### π“‚ _LIB : μ‹¤μ§μ μΌλ΅ λ΅κ·Έλ¥Ό DBμ— μ €μ¥μ‹ν‚¤λ” ν•¨μ

**π“‹ _Config_LOG.php** : DB κ΄€λ ¨ κΈ€λ΅λ² λ³€μ

π“‹ LogGame.php.php, π“‹ LogProfiling.php, π“‹ LogSystem.php : μΆ…λ¥λ³„ λ΅κ·Έ λ‚ λ¦¬λ” νμ΄μ§€
